<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>Exercício 15</title>
  </head>
  <body>
    <p>15. Escreva um código que atenda os sequintes requisitos:</p>
    <p>.Possua um objeto cliente, com as propriedades nome, sexo, data de nascimento, e
      endereço (sendo um objeto com as propriedades cep, logradouro, número, complemento, bairro, cidade, estado).
      Deve possuir um método que alerte todas as informações do cliente.</p>
    <p>.Possua um objeto produto com as propriedades titulo, descrição e valor.
       Deve possuir um método que alerte seu nome e valor.</p>
    <p>.Possua um objeto venda com as propriedades data, cliente, produtos, desconto e acréscimo.
      Deve existir um método que receba um objeto cliente e adicione-o a propriedade cliente.
      Deve ser possível adicionar n produtos, através de um método, que receba um objeto produto e uma quantidade,
      e adicione-os na propriedade produtos. Deve existir um método que retorne o um objeto com as
      propriedades valor dos produtos, e valor total, sendo este, a soma dos valores produtos vezes a quantidade,
      menos o desconto, mais o acréscimo.</p>

      <script type="text/javascript">
        var cliente = {
          nome:"Tiririca",
          sexo:"Masculino",
          dataDeNascimento:"19/10/1978",
          endereco: {
            cep:"87090-675",
            logradouro:"Rua dos pombos",
            numero:"200",
            complemento:"Casa",
            bairro:"Zona da zona",
            cidade:"Maringá",
            estado:"Paraná"
          },
          exibirInformacoesDoCliente:function(){
            alert("informações o cliente:" +
            "\nNome: " + this.nome +
            "\nSexo: " + this.sexo +
            "\nData de nascimento: " + this.dataDeNascimento +
            "\n|-------------------------------|" +
            "\nEndereço: " +
            "\nCep: " + this.endereco.cep +
            "\nLogradouro: " + this.endereco.logradouro +
            "\nNúmero: " + this.endereco.numero +
            "\nComplemento: " + this.endereco.complemento +
            "\nBairro: " + this.endereco.bairro +
            "\nCidade: " + this.endereco.cidade +
            "\nEstado: " + this.endereco.estado);
          }
        }

        var produto1 = {
          titulo:"Pneu",
          descricao:"200cm",
          valor:100.00,
          exibirInformacoesDoProduto:function(){
            alert("Informações do produto: " +
            "\nTítulo: " + this.titulo +
            "\nValor: " + this.valor);
          },
          getTitulo:function(){
            return this.titulo;
          }
        }

        var produto2 = {
          titulo:"Pastel",
          descricao:"2000cm",
          valor:200.00,
          exibirInformacoesDoProduto:function(){
            alert("Informações do produto: " +
            "\nTítulo: " + this.titulo +
            "\nValor: " + this.valor);
          }
        }

        var produto3 = {
          titulo:"Guitarra",
          descricao:"80cm",
          valor:300.00,
          exibirInformacoesDoProduto:function(){
            alert("Informações do produto: " +
            "\nTítulo: " + this.titulo +
            "\nValor: " + this.valor);
          }
        }

        var venda = {
          data:"10/03/2018",
          cliente:"",
          produtos:[],
          desconto:25.00,
          acrescimo:10.00,
          adicionarCliente:function(cliente){
            this.cliente = cliente;
          },
          adicionarProduto:function(produto,quantidade){
              produtoVenda = {
              produto: produto,
              quantidade: quantidade
            }
            this.produtos.push(produtoVenda);
          },
          exibirInformacoesDaVenda:function(){
            var valorTotal = 0;
            /*for (var i = 0; i <= this.produtos.length; i++) {
              alert("Informações da venda: " +
              "\nNome do produto: " + this.produtos[i].produto.titulo +
              "\nQuantidade do produto: " + this.produtos[i].quantidade);
              valorTotal += (this.produtos[i].produto.valor * this.produtos[i].quantidade);
              console.log(valorTotal);
            }
            alert("Valor total: R$"+ valotTotal);*/
            this.produtos.forEach(function(item){
              alert("Informações da venda: " +
              "\nNome do produto: " + item.produto.titulo +
              "\nQuantidade do produto: " + item.quantidade +
              "\nValor do produto: " + item.produto.valor);
              valorTotal += (item.produto.valor * item.quantidade);
            })
              valorTotal += (venda.acrescimo - venda.desconto)
            alert("Valor total: R$"+ valorTotal);
          }
        }

        cliente.exibirInformacoesDoCliente();
        //produto1.exibirInformacoesDoProduto();
        //produto2.exibirInformacoesDoProduto();
        //produto3.exibirInformacoesDoProduto();

        venda.adicionarCliente(cliente);
        venda.adicionarProduto(produto1,5);
        venda.adicionarProduto(produto2,2);
        venda.adicionarProduto(produto3,3);
        venda.exibirInformacoesDaVenda();


      </script>
  </body>
</html>
